<main>
    <h1>HOLA MUNDO HANDLE</h1>
    <div>
        Description<input type="text" name="description" id="description">
    </div>
    <div>
        <ul id="items">
        </ul>
    </div>
</main>
<script src="/socket.io/socket.io.js"></script>
{{!-- <script src="/asset/js/home.js"></script>    --}}
<link href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-wordpress-admin/wordpress-admin.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.js"></script>
<script>

const socket = io()
let product

Swal.fire({
    title:'Creating New Product',
    text:'Insert Title of the Product',
    input:'text',
    inputValidator: value => {
        return !value
    },
    allowOutsideClick:false
})
.then(result => {
    product = result.value
})

    let description = document.querySelector ('#description')
    description.addEventListener('keyup', evt => {
    if (evt.key === 'Enter'){
        if(description.value.trim().length > 0){
            socket.emit('description',{product, description:description.value})
            description.value=''
        }
    }
})

    socket.on('newItem', data => {
    let log = document.getElementById('items')

    let products = ''
    data.forEach(product => {
        products += `<li>Product:${product.product}<br> Description: ${product.description}</li><br>`
    })
    log.innerHTML = products
    })


</script>




